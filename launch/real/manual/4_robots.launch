<launch>

    <!--
	<arg name="adr0" default="E6:CD:44:A7:EF:7D"/>
	<arg name="adr1" default="FB:28:2C:0B:75:19"/>
	<arg name="adr2" default="E9:C8:1D:54:E4:31"/>
	<arg name="adr3" default="E2:6A:A9:2C:64:3D"/>
    -->

    <arg name="adr0" default="EE:D3:34:87:1D:70"/>
	<arg name="adr1" default="E6:A3:F0:3F:B6:48"/>
	<arg name="adr2" default="C9:28:93:02:46:F7"/>
	<arg name="adr3" default="C4:5F:2C:3B:96:A6"/>

    <!-- Start Joy node: user control with joystick -->
	<node pkg="joy" type="joy_node" name="JoyInput">
		<!-- REPLACE value WITH THE RIGHT JOYSTICK IDENTIFIERˇˇˇ-->
		<param name="dev" type="string" value="/dev/input/js0"/>
		<param name="deadzone" value="0"/>
	</node>

	<group ns="sphero_0">
		<node pkg="sphero_formation" type="man_control.py" name="manual" output="screen">
			<remap from="/joystick_input" to="/joy"/>
			<param name="sensitivity" value="0.2"/>
		</node>

		<node pkg="sphero_sprk" type="sphero_driver.py" name="driver" output="screen" >
			<param name="adresa" type="str" value="$(arg adr0)"/>
		</node>

        <node pkg="sphero_formation" type="kalman_filter.py" name="kalman" output="screen"/>
	</group>

	<group ns="sphero_1">
		<node pkg="sphero_formation" type="man_control.py" name="manual">
			<remap from="/joystick_input" to="/joy"/>
			<param name="sensitivity" value="0.2"/>
		</node>

		<node pkg="sphero_sprk" type="sphero_driver.py" name="driver" output="screen">
			<param name="adresa" type="str" value="$(arg adr1)"/>
		</node>

        <node pkg="sphero_formation" type="kalman_filter.py" name="kalman" output="screen"/>
	</group>

	<group ns="sphero_2">
		<node pkg="sphero_formation" type="man_control.py" name="manual">
			<remap from="/joystick_input" to="/joy"/>
			<param name="sensitivity" value="0.2"/>
		</node>

		<node pkg="sphero_sprk" type="sphero_driver.py" name="driver" output="screen">
			<param name="adresa" type="str" value="$(arg adr2)"/>
		</node>

        <node pkg="sphero_formation" type="kalman_filter.py" name="kalman" output="screen"/>
	</group>

	<group ns="sphero_3">
		<node pkg="sphero_formation" type="man_control.py" name="manual">
			<remap from="/joystick_input" to="/joy"/>
			<param name="sensitivity" value="0.2"/>
		</node>

		<node pkg="sphero_sprk" type="sphero_driver.py" name="driver" output="screen">
			<param name="adresa" type="str" value="$(arg adr3)"/>
		</node>

        <node pkg="sphero_formation" type="kalman_filter.py" name="kalman" output="screen"/>
	</group>
</launch>
